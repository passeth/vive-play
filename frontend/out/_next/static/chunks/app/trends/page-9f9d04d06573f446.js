(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{9233:function(e,t,s){Promise.resolve().then(s.bind(s,3033))},3033:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7821),n=s(4542),a=s(8078),i=s(9618);function o(){let[e,t]=(0,a.useState)("전체"),[s,o]=(0,a.useState)(""),[l,c]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0),[x,p]=(0,a.useState)(null),[m,f]=(0,a.useState)({currentPage:1,totalPages:1,totalCount:0,hasNextPage:!1,hasPrevPage:!1}),[j,y]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{v()},[e,s]),(0,a.useEffect)(()=>{i.I8.isAuthenticated()&&l.length>0&&k()},[l]);let v=async()=>{try{if(g(!0),p(null),0===d.length){let e=await i.Jo.getCategories();h(e.categories)}let t={page:1,limit:20};"전체"!==e&&(t.category=e),s&&(t.search=s);let r=await i.Jo.getAll(t);c(r.trends),f(r.pagination)}catch(e){console.error("Failed to load trends:",e),p("트렌드를 불러오는데 실패했습니다.")}finally{g(!1)}},k=async()=>{if(i.I8.isAuthenticated())try{let e=await Promise.allSettled(l.map(e=>i.Jo.checkPinStatus(e.id))),t=new Set;e.forEach((e,s)=>{"fulfilled"===e.status&&e.value.isPinned&&t.add(l[s].id)}),y(t)}catch(e){console.error("Failed to check pin statuses:",e)}},b=async e=>{if(!i.I8.isAuthenticated()){alert("로그인이 필요합니다.");return}try{j.has(e)?(await i.Jo.unpin(e),y(t=>{let s=new Set(t);return s.delete(e),s})):(await i.Jo.pin(e),y(t=>new Set(t).add(e)))}catch(e){console.error("Failed to toggle pin:",e),alert("핀 상태 변경에 실패했습니다.")}},N=["전체",...d.map(e=>e.name)];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-purple-600 rounded-lg"}),(0,r.jsx)(n.default,{href:"/",className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Vibe-Play"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsx)(n.default,{href:"/dashboard",className:"text-gray-600 hover:text-pink-600 transition",children:"대시보드"}),(0,r.jsx)(n.default,{href:"/trends",className:"text-pink-600 font-semibold",children:"트렌드핀"}),(0,r.jsx)(n.default,{href:"/vibe-play",className:"text-gray-600 hover:text-pink-600 transition",children:"Vibe Play"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"트렌드핀 아카이브"}),(0,r.jsx)("p",{className:"text-gray-600",children:"최신 화장품 트렌드를 탐색하고 마이핀에 저장하세요"})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"트렌드 검색...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,r.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:N.map(s=>(0,r.jsx)("button",{onClick:()=>t(s),className:"px-4 py-2 rounded-lg whitespace-nowrap transition ".concat(e===s?"bg-gradient-to-r from-pink-500 to-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s},s))})]})}),u&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsx)("p",{className:"text-gray-600",children:"트렌드를 불러오는 중..."})]}),x&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:x}),(0,r.jsx)("button",{onClick:v,className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition",children:"다시 시도"})]}),!u&&!x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("p",{className:"text-gray-600",children:["총 ",(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:m.totalCount}),"개의 트렌드"]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:i.I8.isAuthenticated()&&(0,r.jsxs)(n.default,{href:"/dashboard/mypins",className:"text-pink-600 hover:text-pink-700 font-medium flex items-center space-x-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),(0,r.jsx)("span",{children:"마이핀 보기"})]})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-lg transition group",children:[(0,r.jsxs)("div",{className:"relative h-48",style:{backgroundColor:e.category_color+"20"},children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-white rounded-full mx-auto mb-2 flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8",style:{color:e.category_color},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.category_name})]})}),i.I8.isAuthenticated()&&(0,r.jsx)("button",{onClick:()=>b(e.id),className:"absolute top-3 right-3 w-8 h-8 rounded-full flex items-center justify-center transition ".concat(j.has(e.id)?"bg-pink-500 text-white shadow-lg":"bg-white text-gray-400 hover:text-pink-500 shadow-md"),children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:j.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),(0,r.jsx)("div",{className:"absolute top-3 left-3",children:(0,r.jsx)("span",{className:"text-white text-xs px-2 py-1 rounded-full font-medium shadow-md",style:{backgroundColor:e.category_color},children:e.category_name})}),e.is_featured&&(0,r.jsx)("div",{className:"absolute top-12 left-3",children:(0,r.jsx)("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-medium shadow-md",children:"\uD83D\uDD25 인기"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-pink-600 transition",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-green-600",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,r.jsxs)("span",{children:[e.popularity_score,"%"]})]})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:e.description}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map((e,t)=>(0,r.jsxs)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full hover:bg-gray-200 transition cursor-pointer",onClick:()=>o(e),children:["#",e]},t))}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{className:"text-pink-600 hover:text-pink-700 font-medium text-sm",children:"자세히 보기"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[i.I8.isAuthenticated()&&(0,r.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-1 rounded-lg text-sm transition ".concat(j.has(e.id)?"bg-pink-100 text-pink-700":"bg-gray-100 text-gray-700 hover:bg-pink-100 hover:text-pink-700"),children:j.has(e.id)?"핀 해제":"핀하기"}),(0,r.jsx)(n.default,{href:"/vibe-play?trend=".concat(encodeURIComponent(e.title),"&category=").concat(encodeURIComponent(e.category_name),"&tags=").concat(encodeURIComponent(e.tags.join(","))),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:shadow-lg transition",children:"활용하기"})]})]})]})]},e.id))}),0===l.length&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"검색 결과가 없습니다"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"다른 키워드로 검색해보시거나 카테고리를 변경해보세요"}),(0,r.jsx)("button",{onClick:()=>{o(""),t("전체")},className:"text-pink-600 hover:text-pink-700 font-medium",children:"전체 트렌드 보기"})]}),m.hasNextPage&&(0,r.jsx)("div",{className:"text-center mt-12",children:(0,r.jsx)("button",{onClick:()=>{console.log("Load more trends")},className:"bg-white border border-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:border-pink-500 hover:text-pink-600 transition",children:"더 많은 트렌드 보기"})})]})]})]})}},9618:function(e,t,s){"use strict";s.d(t,{I8:function(){return a},Jo:function(){return l},ai:function(){return o},q:function(){return i}});class r{getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat("http://localhost:3000").concat(e),r={...t,headers:{...this.getHeaders(),...t.headers}};try{let e=await fetch(s,r);if(!e.ok){let t=await e.json().catch(()=>({error:"Network error"}));throw Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async register(e){let t=await this.request("/api/auth/register",{method:"POST",body:JSON.stringify(e)});return this.setToken(t.token),t}async login(e){let t=await this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)});return this.setToken(t.token),t}async getProfile(){return this.request("/api/auth/me")}setToken(e){this.token=e,localStorage.setItem("auth_token",e)}clearToken(){this.token=null,localStorage.removeItem("auth_token")}isAuthenticated(){return!!this.token}async getProjects(){return this.request("/api/projects")}async getProject(e){return this.request("/api/projects/".concat(e))}async createProject(e){return this.request("/api/projects",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/api/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/api/projects/".concat(e),{method:"DELETE"})}async generateAISuggestion(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request("/api/ai/generate",{method:"POST",body:JSON.stringify({projectId:e,regenerate:t})})}async acceptAISuggestion(e){return this.request("/api/ai/accept/".concat(e),{method:"POST"})}async getAISuggestions(e){return this.request("/api/ai/suggestions/".concat(e))}async getTrends(e){let t=new URLSearchParams;(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let s=t.toString();return this.request("/api/trends".concat(s?"?".concat(s):""))}async getTrendCategories(){return this.request("/api/trends/categories")}async getTrend(e){return this.request("/api/trends/".concat(e))}async pinTrend(e,t){return this.request("/api/trends/pin",{method:"POST",body:JSON.stringify({trendId:e,notes:t})})}async unpinTrend(e){return this.request("/api/trends/pin/".concat(e),{method:"DELETE"})}async getUserPins(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.request("/api/trends/user/pins?page=".concat(e,"&limit=").concat(t))}async checkTrendPinStatus(e){return this.request("/api/trends/".concat(e,"/pinned"))}constructor(){this.token=null,this.token=localStorage.getItem("auth_token")}}let n=new r,a={register:e=>n.register(e),login:e=>n.login(e),getProfile:()=>n.getProfile(),logout:()=>n.clearToken(),isAuthenticated:()=>n.isAuthenticated()},i={getAll:()=>n.getProjects(),get:e=>n.getProject(e),create:e=>n.createProject(e),update:(e,t)=>n.updateProject(e,t),delete:e=>n.deleteProject(e)},o={generate:(e,t)=>n.generateAISuggestion(e,t),accept:e=>n.acceptAISuggestion(e),getSuggestions:e=>n.getAISuggestions(e)},l={getAll:e=>n.getTrends(e),getCategories:()=>n.getTrendCategories(),get:e=>n.getTrend(e),pin:(e,t)=>n.pinTrend(e,t),unpin:e=>n.unpinTrend(e),getUserPins:(e,t)=>n.getUserPins(e,t),checkPinStatus:e=>n.checkTrendPinStatus(e)}},4542:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var r=s(9485),n=s.n(r)}},function(e){e.O(0,[485,115,364,744],function(){return e(e.s=9233)}),_N_E=e.O()}]);